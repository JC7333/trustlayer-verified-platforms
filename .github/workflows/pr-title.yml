name: PR Title Lint

permissions:
  contents: read
  pull-requests: read

on:
  pull_request:
    branches: ["main", "lovable-dev"]
    types: [opened, edited, synchronize, reopened, ready_for_review]

jobs:
  pr-title:
    name: pr-title
    runs-on: ubuntu-latest
    steps:
      - name: Valider le titre de PR
        uses: actions/github-script@v8
        with:
          script: |
            const title = context.payload.pull_request.title || "";
            const pattern = /^(feat|fix|chore|docs|refactor|test|ci): .+/;
            if (!pattern.test(title)) {
              core.warning(`PR title should match: ${pattern}`);
            }
